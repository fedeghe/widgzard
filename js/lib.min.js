!function(t){"use strict";function n(t,e,r){var i,o=".",a=t.split(/\.|\//),c=a.length,s="undefined";return typeof r===s&&(r=window),typeof e===s&&(e={}),r[a[0]]||(r[a[0]]=1===c?e:{}),i=r[a[0]],c>1?n(a.slice(1).join(o),e,r[a[0]]):i}function e(t,n){var e=t.split(/\.|\//),r=0,i=e.length;if(n=void 0!==n?n:W,!t)return n;for(null;i>r;r+=1){if("undefined"==typeof n[e[r]])return void 0;n=n[e[r]]}return n}var r=!1;n(t,{makeNS:n,checkNS:e,debug:function(t){r=!!t},dbg:function(t){if(!r)return void 0;try{console.log(t)}catch(n){try{opera.postError(t)}catch(e){alert(t)}}}}),n(t+".utils",{uniqueId:new function(){var n=0,e=this;this.prefix=t+"_",this.toString=function(){return e.prefix+ ++n}}})}("FG"),FG.util={uniqueid:new function(){var t=0,n=this;this.prefix="FG",this.toString=function(){return++t,n.prefix+t}},isValidEmail:function(t){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(t)},delegate:function(t,n){var e=Array.prototype.slice.call(arguments,2);return function(){return t.apply(n||null,[].concat(e,Array.prototype.slice.call(arguments,0)))}}},FG.object=function(){function t(t,n){var e,r="";for(e in t)t.hasOwnProperty(e)&&(r+=n(t,e,r));return r}function n(t,n){return"undefined"!=typeof JSON?JSON.stringify(t)===JSON.stringify(n):t==n}function e(t,e,r){if(!t.match(/key|value/))throw new Error("Bad param for object.digFor");var i={key:function(t,e,r){return FG.object.isString(t)&&r instanceof RegExp?t.match(r):n(t,r)},value:function(t,e,r){return FG.object.isString(e)&&r instanceof RegExp?e.match(r):n(e,r)}}[t],o=[],a=function(t,n,e,r,a){var s=[].concat.call(t,[n]),u=i(n,r[n],e);u&&o.push({value:r[n],key:s[s.length-1],parentKey:s[s.length-2],path:s.join("/"),container:s.slice(0,s.length-1).join("/"),parentContainer:s.slice(0,s.length-2).join("/"),regexp:u,level:a}),c(r[n],e,s,a+1)},c=function(t,n,e,r){var i,o;if(t instanceof Array)for(i=0,o=t.length;o>i;i++)a(e,i,n,t,r);else{if("object"!=typeof t)return;for(i in t)a(e,i,n,t,r)}};return c(e,r,[],0),o}return{toQs:function(n){return t(n,function(t,n,e){return((e?"&":"?")+encodeURIComponent(n)+"="+encodeURIComponent(t[n])).replace(/\'/g,"%27")})},jCompare:n,digForKey:function(t,n){return e("key",t,n)},digForValue:function(t,n){return e("value",t,n)},isString:function(t){return"string"==typeof t||t instanceof String},extend:function(t,n,e){var r,i=FG.object.clone(t);for(r in n)!n.hasOwnProperty(r)||r in i&&!e||(i[r]=n[r]);return i},clone:function(t){var n,e,r,i=FG.object;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n;if(t instanceof Array){for(n=[],e=0,r=t.length;r>e;e++)n[e]=i.clone(t[e]);return n}if(t instanceof Object){n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=i.clone(t[e]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")}}}(),FG.makeNS("FG/io"),FG.io=function(){var W=window,_={getxhr:function(){var t,n=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],e=n.length,r=0;try{t=new W.XMLHttpRequest}catch(i){for(null;e>r;r+=1)try{t=new W.ActiveXObject(n[r])}catch(o){continue}!t&&alert("No way to initialize XHR")}return t},ajcall:function(t,n){var e=_.getxhr(),r=n&&n.method||"POST",i=n&&n.cback,o=n&&n.opened||function(){},a=n&&n.loading||function(){},c=n&&n.error||function(){},s=n&&n.abort||function(){},u=n&&n.sync,l=n&&n.data||!1,f=n&&n.type||"text/html",d=n&&void 0!==n.cache?n.cache:!0,h="xml"===f?"responseXML":"responseText",p=n&&n.timeout||3e3,g=!1,y=!1,v=!1,m=!1;d||(l.C=+new Date),l=FG.object.toQs(l).substr(1),e.onreadystatechange=function(){var t;if(m===e.readyState)return!1;if(m=e.readyState,"complete"===e.readyState||4===e.readyState&&200===e.status)return g=!0,i&&(y=e[h],function(){i(y)}(y)),v=e[h],W.setTimeout(function(){e=null},50),v;if(3===e.readyState)a(e);else if(2===e.readyState)o(e);else if(1===e.readyState)switch(r){case"POST":try{e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(l||!0)}catch(n){}break;case"GET":try{t={xml:"text/xml",html:"text/html",json:"application/json"}[f]||"text/html",e.setRequestHeader("Accept",t+"; charset=utf-8"),e.send(null)}catch(c){}break;default:alert(r),e.send(null)}return!0},e.onerror=function(){c&&c.apply(null,arguments)},e.onabort=function(){s&&s.apply(null,arguments)},e.open(r,"GET"===r?t+(l?"?"+l:""):t,u),W.setTimeout(function(){g||(g=!0,e.abort())},p);try{return"responseXML"===h?e[h].childNodes[0]:e[h]}catch(b){}return!0}};return{getxhr:_.getxhr,post:function(t,n,e,r,i,o){return _.ajcall(t,{cback:n,method:"POST",sync:e,data:r,cache:i,error:o})},get:function(t,n,e,r,i,o){return _.ajcall(t,{cback:n||function(){},method:"GET",sync:e,data:r,cache:i,error:o})},getJson:function(uri,cback,data){return _.ajcall(uri,{type:"json",method:"GET",sync:!1,cback:function(r){cback(W.JSON&&W.JSON.parse?JSON.parse(r):eval("("+r+")"))},data:data})},getXML:function(t,n){return _.ajcall(t,{method:"GET",sync:!1,type:"xml",cback:n||function(){}})}}}(),FG.makeNS("FG/css"),FG.css.style=function(t,n,e){var r,i="object"==typeof n&&"undefined"==typeof e,o=!1;if(!i&&"undefined"==typeof e)return o=t.currentStyle?t.currentStyle[n]:t.style[n];if(i)for(r in n)t.style[r]=n[r];else"undefined"!=typeof e&&(e+="",t.style[n]=e,"opacity"===n&&(t.style.filter="alpha(opacity = "+~~(100*parseFloat(e,10))+")"))},FG.dom={addClass:function(t,n){var e=t.className?t.className:"",r=new RegExp("(\\s|^)"+n+"(\\s|$)");e.match(r)||(t.className=n+" "+e)},removeClass:function(t,n){var e=new RegExp("(\\s|^)"+n+"(\\s|$)");t.className=t.className.replace(e," ")},descendant:function(){var t=Array.prototype.slice.call(arguments,0),n=0,e=t.shift(),r=t.length;if(!r)return e;for(;r>n;)e=e.children.item(~~t[n++]);return e},remove:function(t){var n=t.parentNode;n.removeChild(t)}},FG.makeNS("FG/events"),FG.events.on=function(t){var n;return n="addEventListener"in t?function(t,n,e){t.addEventListener.apply(t,[n,e,!1])}:"attachEvent"in t?function(t,n,e){t.attachEvent.apply(t,["on"+n,e])}:function(){throw new Error("No straight way to bind an event")}}(this),FG.events.eventTarget=function(t){t=t?t:window.event;var n=t.currentTarget||"undefined"!=typeof t.target?t.target:t.srcElement;if(!n)return!1;for(;3===n.nodeType&&null!==n.parentNode;)n=n.parentNode;return n},FG.events.kill=function(t){return t||(t=W.event,t.cancelBubble=!0,t.returnValue=!1),"stopPropagation"in t&&t.stopPropagation()&&t.preventDefault(),!1},FG.events.transitionEnd=function(){var t,n=document.createElement("fake"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in e)if(void 0!==n.style[t])return e[t]}(),FG.Channel=function(){var t={},n=function(t,n){if("indexOf"in t)return t.indexOf(n);for(var e=t.length-1;t[e]!==n;)e--;return e},e=function(){this.topic2cbs={},this.enabled=!0};return e.prototype={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},pub:function(t,n){var e,r=0;if(!(t in this.topic2cbs&&this.enabled))return!1;for(e=this.topic2cbs[t].length;e>r;r+=1)this.topic2cbs[t][r].apply(null,[t].concat(n));return!0},sub:function(t,e,r){var i,o=0;if(t instanceof Array)for(i=t.length;i>o;o+=1)this.sub(t[o],e);return t in this.topic2cbs&&this.enabled||(this.topic2cbs[t]=[]),!r&&n(this.topic2cbs[t],e)>=0?this:void this.topic2cbs[t].push(e)},unsub:function(t,e){var r,i=0;if(t instanceof Array)for(r=t.length;r>i;i+=1)this.unsub(t[i],e);return t in this.topic2cbs&&(i=n(this.topic2cbs[t],e),i>=0&&this.topic2cbs[t].splice(i,1)),this},once:function(t,n){var e=this,r=function(){n.apply(null,Array.prototype.slice.call(arguments,0)),e.unsub(t,r)};this.sub(t,r)},reset:function(){var t=Array.prototype.slice.call(arguments,0),n=t.length,e=0;if(!n)return this.topic2cbs={},this;for(null;n>e;e+=1)t[e]in this.topic2cbs&&(this.topic2cbs[t[e]]=[]);return this}},function(n){return n in t||(t[n]=new e),t[n]}}(),function(t){"use strict";function n(t,n,e){var r=this,i=t.tag||"div";this.target=n,this.node=document.createElement(i),this.conf=t,this.WIDGZARD_cb=t.cb||function(){p&&console.log("autoresolving  ",r.node),r.resolve()},this.root=e.root,this.parent=n,this.WIDGZARD_promise=c.create(),this.WIDGZARD_promise.then(r.WIDGZARD_cb,r),this.map=e.map,this.abort=e.abort,this.getNode=e.getNode,this.getNodes=e.getNodes,this.WIDGZARD_len=t.content?t.content.length:0,this.done=this.resolve=this.solve=function(){0==--r.target.WIDGZARD_len&&(r.target.WIDGZARD_promise?r.target.WIDGZARD_promise.done():r.target.WIDGZARD_cb())},this.lateWid=e.lateWid}function e(t){var n=t.node,e=function(t){return t.parentNode.removeChild(t),!0},r=[],i=["WIDGZARD","WIDGZARD_cb","WIDGZARD_promise","WIDGZARD_length","parent","getNode","climb","root","done","resolve","data"],o=i.length,a=0,c=0,s=0,u=null;for(l(n,function(t){t!==n&&3!=t.nodeType&&r.push(t)&&s++},"post");s>c;){for(u=r[c++];o>a;)u[i[a++]]=null;e(u)}return r=null,i=null,!0}function r(t,r){var i={node:t.target||document.body,endFunctions:[]},o={node:document.createDocumentFragment("div")},a=!0;if(p=!!t.debug,h&&i.WIDGZARD&&e(i),!t)throw new Exception("ERROR : Check parameters for render function");var c={root:i,map:{},getNode:function(t){return c.map[t]||!1},getNodes:function(){return c.map},abort:function(){return a=!1,!1},lateWid:function(t){c.map[t]=this}};g.setAttrs(i.node,t.attrs).setStyle(i.node,t.style).setData(i,t.data).setData(o,t.data),i.descendant=g.descendant,o.descendant=g.descendant,r&&(i.node.innerHTML=""),"undefined"!=typeof t.html&&(i.node.innerHTML=t.html),i.WIDGZARD_len=t.content?t.content.length:0,o.WIDGZARD_len=t.content?t.content.length:0,o.WIDGZARD_cb=i.WIDGZARD_cb=function(){if(a&&i.node.appendChild(o.node)&&t.cb&&t.cb.call(i),i.endFunctions.length)for(var n=0,e=i.endFunctions.length;e>n;n++)i.endFunctions[n]()},i.WIDGZARD=!0,i.getNode=o.getNode=c.getNode,i.getNodes=o.getNodes=c.getNodes,i.abort=o.abort=function(){i.node.innerHTML=""},g.checkInit(o,t),function s(t,e){if(!a)return!1;if(t.content)for(var r=0,i=t.content.length;i>r;r++)t.content[r]===f&&(t.content[r]={tag:"br",attrs:{"class":f}}),s(t.content[r],new n(t.content[r],e,c).add())}(t,o)}function i(t){var n=document.createElement("div");return t.target=n,r(t),n}function o(t){r({target:t,content:[{html:"no content"}]},!0)}function a(t){var n=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(n),n.src=t,n.onload=function(){n.parentNode.removeChild(n)}}var c,s,u,l,f="clearer",d="wid",h=!0,p=!1,g=n.prototype;g.climb=function(t){t=t||1;for(var n=this;t--;)n=n.parent;return n},g.descendant=function(){var t=this,n=Array.prototype.slice.call(arguments,0),e=0,r=t,i=n.length;if(!i)return r;for(;i>e;)r=r.childrens[~~n[e++]];return r},g.setAttrs=function(t,n){if("undefined"!=typeof n)for(var e in n)"class"!==e?"style"!==e?t.setAttribute(e,n[e]):this.setStyle(t,n.style):t.className=n[e];return this},g.setStyle=function(t,n){if("undefined"!=typeof n)for(var e in n)t.style[e.replace(/^float$/i,"cssFloat")]=n[e];return this},g.setData=function(t,n){return t.data=n||{},this},g.checkInit=function(t,n){return"init"in n&&"function"==typeof n.init&&n.init.call(t),this},g.checkEnd=function(t,n){return"end"in n&&"function"==typeof n.end&&this.root.endFunctions.push(function(){n.end.call(t)}),this},g.add=function(){var t=this.conf,n=this.node;return this.setAttrs(n,t.attrs).setStyle(n,t.style).setData(this,t.data).checkInit(this,t).checkEnd(this,t),"undefined"!=typeof t.html&&(n.innerHTML=t.html),"undefined"!=typeof t[d]&&(this.map[t[d]]=this),(t.target||this.target.node).appendChild(n),"childrens"in(t.target||this.target)||((t.target||this.target).childrens=[]),(t.target||this.target).childrens.push(this),this.WIDGZARD=!0,(!t.content||0==t.content.length)&&this.WIDGZARD_cb.call(this),this},c=function(){function t(t,n){for(var r=new e,i=function(){return t[0].apply(r,[r].concat([n])),r}(),o=[i],a=1,c=t.length;c>a;a++)o.push(o[a-1].then(t[a]));return r}function n(t,n){var r=new e,i=[],o=[],a=0,c=t.length,s=c,u=function(t){!t&&r.done.apply(r,i)};for(null;c>a;a++)!function(r){o[r]=new e;var a=t[r].apply(o[r],[o[r],n]);(a instanceof e?a:o[r]).then(function(t,n){i[r]=n,u(--s)})}(a);return r}var e=function(){this.cbacks=[],this.solved=!1,this.result=null},r=e.prototype;return r.then=function(t,n){var e=this,r=function(){e.solved=!1,t.apply(n||e,[n||e,e.result])};return this.solved?r():this.cbacks.push(r),this},r.done=function(){var t=[].slice.call(arguments,0);return this.result=t,this.solved=!0,this.cbacks.length?void this.cbacks.shift()(t):this.result},{create:function(){return new e},chain:t,join:n}}(),l=function(t,n,e){e={pre:"pre",post:"post"}[e]||"post";var r=function(){},i="pre"===e?n:r,o="post"===e?n:r,a=function(){return function(t,n){for(i(t),n=t.firstChild;n;)a(n),n=n.nextSibling;o(t)}}();a(t)},u=function(t,n){var e=Array.prototype.slice.call(arguments,2);return function(){return t.apply(n||window,[].concat(e,Array.prototype.slice.call(arguments)))}},s=function(t){return"<pre>"+t.replace(/&(?![\w\#]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},t.Widgzard={render:r,cleanup:o,get:i,load:a,htmlspecialchars:s,Promise:c}}(this);