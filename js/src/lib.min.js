!function(t){"use strict";function e(t,n,r){t=t.replace(/^\//,"");var o,i=t.split(/\.|\//),a=i.length,c="undefined";return typeof r===c&&(r=window),typeof n===c&&(n={}),"function"==typeof n&&(n=n()),r[i[0]]||(r[i[0]]=1===a?n:{}),o=r[i[0]],a>1?e(i.slice(1).join("."),n,r[i[0]]):o}function n(t,e){t=t.replace(/^\//,"");var n=t.split(/\.|\//),r=0,o=n.length;if(e=void 0!==e?e:W,!t)return e;for(null;o>r;r+=1){if("undefined"==typeof e[n[r]])return void 0;e=e[n[r]]}return e}var r=!1;e(t,{makeNS:e,checkNS:n,debug:function(t){r=!!t},dbg:function(t){if(!r)return void 0;try{console.log(t)}catch(e){try{opera.postError(t)}catch(n){alert(t)}}}}),e(t+".utils",{uniqueId:new function(){var e=0,n=this;this.prefix=t+"_",this.toString=function(){return n.prefix+ ++e}}})}("FG"),FG.util={uniqueid:new function(){var t=0,e=this;this.prefix="FG",this.toString=function(){return++t,e.prefix+t}},isValidEmail:function(t){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},delegate:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e||null,[].concat(n,Array.prototype.slice.call(arguments,0)))}}},FG.object=function(){function t(t,e){var n,r="";for(n in t)t.hasOwnProperty(n)&&(r+=e(t,n,r));return r}function e(t,e){return n(t)||"undefined"==typeof JSON?t==e:JSON.stringify(t)===JSON.stringify(e)}function n(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function r(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function o(t,o,i,a){if(!t.match(/key|value/))throw new Error("Bad param for object.digFor");a=~~a;var c=0,u={key:function(t,n,r){return FG.object.isString(t)&&r instanceof RegExp?t.match(r):e(t,r)},value:function(t,n,r){var o=FG.object.isString(n)&&r instanceof RegExp?n.match(r):e(n,r);return o}}[t],s=[],f=function(t,e,n,r,o){var i=[].concat.call(t,[e]),a=u(e,r[e],n);a&&(s.push({value:r[e],key:i[i.length-1],parentKey:i[i.length-2],path:i.join("/"),container:i.slice(0,i.length-1).join("/"),parentContainer:i.slice(0,i.length-2).join("/"),regexp:a,level:o}),c++),l(r[e],n,i,o+1)},l=function(t,e,o,i){if(!n(t)&&!r(t)){var u,s;if(t instanceof Array)for(u=0,s=t.length;s>u&&(f(o,u,e,t,i),!a||a!=c);u++);else{if("object"!=typeof t)return;for(u in t)if(f(o,u,e,t,i),a&&a==c)break}}};return l(o,i,[],0),s}return{toQs:function(e){return t(e,function(t,e,n){return((n?"&":"?")+encodeURIComponent(e)+"="+encodeURIComponent(t[e])).replace(/\'/g,"%27")})},jCompare:e,digForKey:function(t,e,n){return o("key",t,e,n)},digForValue:function(t,e,n){return o("value",t,e,n)},isString:function(t){return"string"==typeof t||t instanceof String},extend:function(t,e,n){var r,o=FG.object.clone(t);for(r in e)!e.hasOwnProperty(r)||r in o&&!n||(o[r]=e[r]);return o},clone:function(t){var e,n,r,o=FG.object;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){for(e=[],n=0,r=t.length;r>n;n++)e[n]=o.clone(t[n]);return e}if(t instanceof Object){e={};for(n in t)t.hasOwnProperty(n)&&(e[n]=o.clone(t[n]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}}}(),FG.makeNS("FG/io"),FG.io=function(){var W=window,_={getxhr:function(){var t,e=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],n=e.length,r=0;try{t=new W.XMLHttpRequest}catch(o){for(null;n>r;r+=1)try{t=new W.ActiveXObject(e[r])}catch(i){continue}!t&&alert("No way to initialize XHR")}return t},ajcall:function(t,e){var n=_.getxhr(),r=e&&e.method||"POST",o=e&&e.cback,i=e&&e.opened||function(){},a=e&&e.loading||function(){},c=e&&e.error||function(){},u=e&&e.abort||function(){},s=e&&e.async||!0,f=e&&e.data||!1,l=e&&e.type||"text/html",p=e&&void 0!==e.cache?e.cache:!0,d="xml"===l?"responseXML":"responseText",h=e&&e.timeout||3e3,y=!1,g=!1,m=!1,v=!1;p||(f.C=+new Date),f=FG.object.toQs(f).substr(1),n.onreadystatechange=function(){var t;if(v===n.readyState)return!1;if(v=n.readyState,"complete"===n.readyState||4===n.readyState&&200===n.status)return y=!0,o&&(g=n[d],function(){o(g)}(g)),m=n[d],W.setTimeout(function(){n=null},50),m;if(3===n.readyState)a(n);else if(2===n.readyState)i(n);else if(1===n.readyState)switch(r){case"POST":try{n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(f||!0)}catch(e){}break;case"GET":try{t={xml:"text/xml",html:"text/html",json:"application/json"}[l]||"text/html",n.setRequestHeader("Accept",t+"; charset=utf-8"),n.send(null)}catch(c){}break;default:alert(r),n.send(null)}return!0},n.onerror=function(){c&&c.apply(null,arguments)},n.onabort=function(){u&&u.apply(null,arguments)},n.open(r,"GET"===r?t+(f?"?"+f:""):t,s),W.setTimeout(function(){y||(y=!0,n.abort())},h);try{return"responseXML"===d?n[d].childNodes[0]:n[d]}catch(b){}return!0}};return{getxhr:_.getxhr,post:function(t,e,n,r,o,i){return _.ajcall(t,{cback:e,method:"POST",async:!!n,data:r,cache:o,error:i})},get:function(t,e,n,r,o,i){return _.ajcall(t,{cback:e||function(){},method:"GET",async:!!n,data:r,cache:o,error:i})},getJson:function(uri,cback,data){return _.ajcall(uri,{type:"json",method:"GET",cback:function(r){cback(W.JSON&&W.JSON.parse?JSON.parse(r):eval("("+r+")"))},data:data})},getXML:function(t,e){return _.ajcall(t,{method:"GET",type:"xml",cback:e||function(){}})}}}(),FG.makeNS("FG/css"),FG.css.style=function(t,e,n){var r,o="object"==typeof e&&"undefined"==typeof n,i=!1;if(!o&&"undefined"==typeof n)return i=t.currentStyle?t.currentStyle[e]:t.style[e];if(o)for(r in e)t.style[r]=e[r];else"undefined"!=typeof n&&(n+="",t.style[e]=n,"opacity"===e&&(t.style.filter="alpha(opacity = "+~~(100*parseFloat(n,10))+")"))},FG.dom={addClass:function(t,e){var n=t.className?t.className:"",r=new RegExp("(\\s|^)"+e+"(\\s|$)");n.match(r)||(t.className=e+" "+n)},removeClass:function(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")},descendant:function(){var t=Array.prototype.slice.call(arguments,0),e=0,n=t.shift(),r=t.length;if(!r)return n;for(;r>e;)n=n.children.item(~~t[e++]);return n},remove:function(t){var e=t.parentNode;e.removeChild(t)}},FG.makeNS("FG/events"),FG.events.on=function(t){var e;return e="addEventListener"in t?function(t,e,n){t.addEventListener.apply(t,[e,n,!1])}:"attachEvent"in t?function(t,e,n){t.attachEvent.apply(t,["on"+e,n])}:function(){throw new Error("No straight way to bind an event")}}(this),FG.events.eventTarget=function(t){t=t?t:window.event;var e=t.currentTarget||"undefined"!=typeof t.target?t.target:t.srcElement;if(!e)return!1;for(;3===e.nodeType&&null!==e.parentNode;)e=e.parentNode;return e},FG.events.kill=function(t){return t||(t=W.event,t.cancelBubble=!0,t.returnValue=!1),"stopPropagation"in t&&t.stopPropagation()&&t.preventDefault(),!1},FG.events.ready=function(){var t=[],e=setInterval(function(){if("complete"===document.readyState){clearInterval(e);for(var n=0,r=t.length;r>n;n++)t[n].call(this)}},10);return function(e){"complete"===document.readyState?e.call(this):t.push(e)}}(),FG.events.transitionEnd=function(){var t,e=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}(),FG.Channel=function(){var t={},e=function(t,e){if("indexOf"in t)return t.indexOf(e);for(var n=t.length-1;t[n]!==e;)n--;return n},n=function(){this.topic2cbs={},this.enabled=!0};return n.prototype={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},pub:function(t,e){var n,r=0;if(!(t in this.topic2cbs&&this.enabled))return!1;for(n=this.topic2cbs[t].length;n>r;r+=1)this.topic2cbs[t][r].apply(null,[t].concat(e));return!0},sub:function(t,n,r){var o,i=0;if(t instanceof Array)for(o=t.length;o>i;i+=1)this.sub(t[i],n);return t in this.topic2cbs&&this.enabled||(this.topic2cbs[t]=[]),!r&&e(this.topic2cbs[t],n)>=0?this:void this.topic2cbs[t].push(n)},unsub:function(t,n){var r,o=0;if(t instanceof Array)for(r=t.length;r>o;o+=1)this.unsub(t[o],n);return t in this.topic2cbs&&(o=e(this.topic2cbs[t],n),o>=0&&this.topic2cbs[t].splice(o,1)),this},once:function(t,e){var n=this,r=function(){e.apply(null,Array.prototype.slice.call(arguments,0)),n.unsub(t,r)};this.sub(t,r)},reset:function(){var t=Array.prototype.slice.call(arguments,0),e=t.length,n=0;if(!e)return this.topic2cbs={},this;for(null;e>n;n+=1)t[n]in this.topic2cbs&&(this.topic2cbs[t[n]]=[]);return this}},function(e){return e in t?t[e]:t[e]=new n}}(),FG.makeNS("FG/i18n",function(){var t={};return FG.lang="undefined"!=typeof sm_lang?sm_lang:"en",{load:function(e){t=e},parse:function(t){var e,n,r=FG.object.digForValue(t,/i18n\(([^}|]*)?\|?([^}]*)\)/);for(e=0,n=r.length;n>e;e++)(typeof r[e].regexp).match(/boolean/i)||(mayP=FG.i18n.check(r[e].regexp[0]),mayP&&(ref=FG.checkNS(r[e].container,t),ref[r[e].key]=FG.i18n.get(mayP[1],mayP[2])))},dynamicLoad:function(e,n){for(n in e)FG.lang in e[n]&&(t[n]=e[n][FG.lang])},check:function(t){return t.match(/i18n\(([^}|]*)?\|?([^}]*)\)/)},get:function(e,n){var r=FG.checkNS(e,t);return r||n||"no Value"}}});