/*

     ...    .     ...         .       ..                                                          ..
  .~`"888x.!**h.-``888h.     @88>   dF                                                          dF
 dX   `8888   :X   48888>    %8P   '88bu.                       ..                   .u    .   '88bu.
'888x  8888  X88.  '8888>     .    '*88888bu        uL        .@88i         u      .d88B :@8c  '*88888bu
'88888 8888X:8888:   )?""`  .@88u    ^"*8888N   .ue888Nc..   ""%888>     us888u.  ="8888f8888r   ^"*8888N
 `8888>8888 '88888>.88h.   ''888E`  beWE "888L d88E`"888E`     '88%   .@88 "8888"   4888>'88"   beWE "888L
   `8" 888f  `8888>X88888.   888E   888E  888E 888E  888E    ..dILr~` 9888  9888    4888> '     888E  888E
  -~` '8%"     88" `88888X   888E   888E  888E 888E  888E   '".-%88b  9888  9888    4888>       888E  888E
  .H888n.      XHn.  `*88!   888E   888E  888F 888E  888E    @  '888k 9888  9888   .d888L .+    888E  888F
 :88888888x..x88888X.  `!    888&  .888N..888  888& .888E   8F   8888 9888  9888   ^"8888*"    .888N..888
 f  ^%888888% `*88888nx"     R888"  `"888*""   *888" 888&  '8    8888 "888*""888"     "Y"       `"888*""
      `"**"`    `"**""        ""       ""       `"   "888E '8    888F  ^Y"   ^Y'                   ""
                                               .dWi   `88E  %k  <88F
                                               4888~  J8%    "+:*%`
                                                ^"===*"`
Author: Federico Ghedina <fedeghe@gmail.com>
Version: 3.1.22
Size: ~35KB
*/
Widgzard=null,Engy=null,function(){"use strict";!function(){var t=function(_U_,_P_){function Wnode(e,t,n,o){var r=this;this.id=""+NS.utils.uniqueId,this.conf=e,this.done=t,this.map=n,this.parent=o,this.children=[],this.data={},this.sub={},this.attrs={},this.style={},this.tag=e.tag||"div",this.conf.style=this.conf.style||{},this.conf.attrs=this.conf.attrs||{},this.conf.data=this.conf.data||{},this.doRender=!0,this.root=n.rootNode,this.abort=n.abort,this.getNode=n.getNode,this.getNodes=n.getNodes,this.lateWid=n.lateWid,this.report=function(){W.JSON&&console.log(["json size : ",NS.utils.toMemFormat(JSON.stringify(r.conf).length,"B")].join("")),console.log(["html size : ",NS.utils.toMemFormat(r.node.innerHTML.length,"B")].join(""))}}console.log("\n\nWIDGZARD v.3.1.22\n\n");var NS={},W=window,WD=W.document,_context_=W;return function(){function e(t,n,o){t=t.replace(/^\//,"");var r,i=t.split(/\.|\//),s=i.length;return typeof o===_U_&&(o=NS),typeof n===_U_&&(n={}),"function"==typeof n&&(n=n()),o[i[0]]||(o[i[0]]=1===s?n:{}),r=o[i[0]],s>1?e(i.slice(1).join("."),n,o[i[0]]):r}function t(e,t){e=e.replace(/^\//,"");var n=e.split(/\.|\//),o=0,r=n.length;if(t=typeof t!==_U_?t:_context_,!e)return t;for(null;o<r;o+=1){if(typeof t[n[o]]===_U_)return;t=t[n[o]]}return t}function n(e,t){var n,o="function"==typeof t?t():t;for(n in o)typeof e[n]===_U_&&(e[n]=o[n])}var o=Array.prototype;NS.makeNs=e,NS.checkNs=t,NS.extendNs=n,NS.debug=function(){var e=o.prototype.slice.call(arguments,0);"debug"in console&&console.debug.apply(console,e)},NS.log=function(){var e=o.prototype.slice.call(arguments,0);"log"in console&&console.log.apply(console,e)},NS.dbg=function(e){try{console.log(e)}catch(t){try{W.opera.postError(e)}catch(t){W.alert(e)}}},NS.makeNs("utils",{uniqueId:new function(){var e=0,t=this;this.prefix="NS_",this.toString=function(){return e+=1,t.prefix+e}},eulerWalk:function(e,t,n){n={pre:"pre",post:"post"}[n]||"post";var o=function(){},r="pre"===n?t:o,i="post"===n?t:o;!function e(t,n){for(r(t),n=t.firstChild;n;)e(n),n=n.nextSibling;i(t)}(e)},replaceDataInTxt:function(e,t){return e.replace(/\$([A-z]*)\$/g,function(e,n){var o=n.replace(/\$/g,"");return o in t?t[o]:""})},toMemFormat:function(e,t){if(!e)return e+(t||"");for(var n=["","K","M","G","T","P","E","Z","Y"],o=0;e/Math.pow(1024,o+1)>1;)o++;return[(e/Math.pow(1024,o)).toFixed(2).replace(/\.?0+$/,""),n[o],t||""].join("")},getViewportSize:function(){var e=WD.documentElement;return typeof W.innerWidth!==_U_?{width:W.innerWidth,height:W.innerHeight}:typeof e!==_U_&&typeof e.clientWidth!==_U_&&0!==e.clientWidth?{width:e.clientWidth,height:e.clientHeight}:{width:WD.getElementsByTagName("body")[0].clientWidth,height:WD.getElementsByTagName("body")[0].clientHeight}},isMobile:function(){return(typeof W.matchMedia!==_U_||typeof W.msMatchMedia!==_U_)&&W.matchMedia("(pointer:coarse)").matches}})}(),function(){function e(t){var n=this,o=!1;this.status=e.STATUSES.PENDING,this.value=null,this.cause=null,this.resolvers=this.resolvers||[],this.rejectors=this.rejectors||[],this.finalizers=this.finalizers||[],t=t||function(){};try{t(function(t){o||n.status!==e.STATUSES.PENDING||(o=!0,n.status=e.STATUSES.FULFILLED,n.value=t,e.roll(n.resolvers,"value",n),e.roll(n.finalizers,"value",n))},function(t){o||n.status!==e.STATUSES.PENDING||(o=!0,n.status=e.STATUSES.REJECTED,n.cause=t,e.roll(n.rejectors,"cause",n),e.roll(n.finalizers,"cause",n))})}catch(t){return e.reject(t.message)}return this}e.roll=function(e,t,n){e.forEach(function(e){e(n[t])},n)},e.prototype.resolve=function(t){return e.call(this,function(e,n){return e(t)})},e.prototype.reject=function(t){return e.call(this,function(e,n){return n(t)})},e.prototype.launch=function(t){return e.call(this,t)},e.prototype.then=function(t,n){switch(this.status){case e.STATUSES.REJECTED:e.roll(this.rejectors,"cause",this);break;case e.STATUSES.PENDING:this.resolvers.push(t),n&&this.rejectors.push(n);break;case e.STATUSES.FULFILLED:t(this.value)}return this},e.prototype.catch=function(t){switch(this.status){case e.STATUSES.PENDING:this.rejectors.push(t);break;case e.STATUSES.REJECTED:return t.call(this,this.cause)}return this},e.prototype.finally=function(t){return this.finalizers.push(t),this.status!==e.STATUSES.PENDING&&e.roll(this.finalizers,"value",this),this},e.STATUSES={PENDING:"PENDING",FULFILLED:"FULFILLED",REJECTED:"REJECTED"},e._isFunc=function(e){return"function"==typeof e},e._isIterable=function(t){return null!=t&&e._isFunc(t[Symbol.iterator])},e.one=function(t){return new e(t)},e.all=function(t){if(!e._isIterable(t))return e.reject("Balle.all acceps an Iterable Promise only");var n=[],o=t.length,r=0;return new e(function(e,i){t.forEach(function(t,s){"REJECTED"==t.status&&i(t.cause),t.then(function(t){r++,n[s]=t,r==o&&e(n)}).catch(i)})})},e.race=function(t){return e._isIterable(t)?new e(function(e,n){t.forEach(function(t){t.then(e).catch(n)})}):e.reject("Balle.race acceps an Iterable Promise only")},e.chain=function(t){if(!e._isIterable(t))return e.reject("Balle.chain acceps an Iterable Promise only");var n=t.length;return new e(function(e,o){!function r(i,s){return i===n?e(s):t[i](s).then(function(e){r(++i,e)}).catch(function(e){o(e)})}(0)})},e.reject=function(t){return new e(function(e,n){return n(t)})},e.resolve=function(t){return new e(function(n,o){t instanceof e?t.then(n).catch(o):n(t)})},"object"==typeof exports&&(module.exports=e),NS.Balle=e}(),function(){var e=function(){function e(e,t){return JSON.stringify(e)===JSON.stringify(t)}function t(e){return"object"==typeof Node?e instanceof W.Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function n(e){return"object"==typeof HTMLElement?e instanceof W.HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function o(e){return"string"==typeof e||e instanceof String}function r(e){return e instanceof RegExp}function i(i,s,c,a){var u,l=+new Date,f=0,h=0,p={key:function(t,n,i){return"function"==typeof i?i(t):o(t)&&r(i)?t.match(i):e(t,i)},value:function(t,n,i){return"function"==typeof i?i(n):o(n)&&r(i)?n.match(i):e(n,i)},keyvalue:function(t,n,i){return("function"==typeof i.key&&i.key(t)||(o(t)&&r(i.key)?t.match(i.key):e(t,i.key)))&&("function"==typeof i.value&&i.value(n)||(o(n)&&r(i.value)?n.match(i.value):e(n,i.value)))}}[i],d={timeElapsed:0,results:[]},m=function(e,t,n,o,r){var i=[].concat.call(e,[t]),s=p(t,o[t],n),c=a.min<=r&&r<=a.max,u=i.length;c&&s&&(d.results.push({obj:o,value:o[t],key:i[u-1],parentKey:i[u-2],path:i.join("/"),container:i.slice(0,u-1).join("/"),parentContainer:i.slice(0,u-2).join("/"),regexp:s,level:r}),h++),g(o[t],n,i,r+1)},g=function(e,o,r,i){var s,c;if(!t(e)||!n(e))if(e instanceof Array)for(s=0,c=e.length;s<c&&(m(r,s,o,e,i),a.limit!==h);s++);else if("object"==typeof e)for(s in e)if(m(r,s,o,e,i),a.limit===h)break};return a.limit="limit"in a?~~a.limit:1/0,a.min="min"in a?~~a.min:0,a.max="max"in a?~~a.max:1/0,a.min=a.min<0?0:a.min,a.max<a.min&&(u=a.min,a.min=a.max,a.max=u),g(s,c,[],0),f=+new Date,d.timeElapsed=f-l,d}return{forKey:function(e,t,n){return i("key",e,t,n||{})},forValue:function(e,t,n){return i("value",e,t,n||{})},forKeyValue:function(e,t,n){return i("keyvalue",e,t,n||{})}}}();"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=e),NS.SearchHash=e}(),function(){var e=W.history,t=[],n=function(e,n,o){t.forEach(function(t){t(e,n,o)})};NS.makeNs("history",{push:function(t,o,r){e.pushState(o||{},r||"",t),n(t,o,r)},registerHandler:function(e){t.push(e)},replace:function(t,o,r){e.replaceState(o||{},r||"",t),n(t,o,r)},resetHandlers:function(){t=[]},state:function(){return e.state}})}(),function(){var e={events:{wwdb_bindings:{},getElementDeterminant:function(e){return e.tagName.match(/input|textarea|select/i)?"value":"innerHTML"},getElementEvent:function(e){return e.tagName.match(/input|textarea/i)?"input":"change"}},unhandlers:{}};NS.makeNs("events",{saveUnhandler:function(t,n){e.unhandlers[t]=e.unhandlers[t]||[],e.unhandlers[t].push(n)},unhandle:function(t){e.unhandlers[t]&&e.unhandlers[t].forEach(function(e){e()}),e.unhandlers=[]},on:function(){function e(e,t,n){NS.events.saveUnhandler(e,function(){NS.events.off(e,t,n)})}return"addEventListener"in W?function(t,n,o){t.addEventListener.apply(t,[n,o,!1]),e(t,n,o)}:"attachEvent"in W?function(t,n,o){t.attachEvent.apply(t,["on"+n,o]),e(t,n,o)}:function(){throw new Error("No straight way to bind an event")}}(),off:function(){return"removeEventListener"in W?function(e,t,n){e.removeEventListener(t,n)}:"detachEvent"in W?function(e,t,n){e.detachEvent.apply(e,["on"+t,n])}:function(){throw new Error("No straight way to unbind an event")}}(),kill:function(e){return e||(e=W.event,e.cancelBubble=!0,e.returnValue=!1),"stopPropagation"in e&&e.stopPropagation()&&e.preventDefault(),!1},eventTarget:function(e){e=e||W.event;var t=e.currentTarget||typeof e.target!==_U_?e.target:e.srcElement;if(!t)return!1;for(;3===t.nodeType&&null!==t.parentNode;)t=t.parentNode;return t},ready:function(){var e,t,n=[],o=setInterval(function(){if("complete"===document.readyState)for(clearInterval(o),e=0,t=n.length;e<t;e++)n[e].call(this)},10);return function(e){"complete"===document.readyState?e.call(this):n.push(e)}}(),ww:{on:function(t,n,o,r){var i=!1,s=!1,c=e.events.getElementDeterminant(o),a=e.events.getElementEvent(o),u=o[c],l=t[n],f=function(e){i=s=!!e};o.wwdbID="_"+NS.utils.uniqueid,e.events.wwdb_bindings[o.wwdbID]=W.setInterval(function(){i||(f(!0),l!==t[n]&&(u=t[n],l=u,o[c]=u),f(!1))},25),NS.events.on(o,a,function(){s||(f(!0),this[c]!==t[n]&&(t[n]=this[c],u=this[c],l=this[c]),f(!1))}),o[c]=l},off:function(){for(var t=[].slice.call(arguments,0),n=t.length;n-- >0;)NS.events.off(t[n],"keyup"),W.clearInterval(e.events.wwdb_bindings[t[n].wwdbID])}}})}(),function(){var e=function(){var e={},t=function(e,t){return e.indexOf(t)},n=function(){this.topic2cbs={},this.lateTopics={},this.enabled=!0},o=function(e,t){var n=e.enabled;return e.enabled=t,n!==e.enabled},r=n.prototype;return r.enable=function(){return o(this,!0)},r.disable=function(){return o(this,!1)},r.pub=function(e,t){var n,o=0,r=[];if(t instanceof Array||(t=[t]),!(e in this.topic2cbs&&this.enabled))return e in this.lateTopics?this.lateTopics[e].push({args:t}):this.lateTopics[e]=[{args:t}],null;if("*"in this.topic2cbs)for(o=0,n=this.topic2cbs["*"].length;o<n;o+=1)r.push(this.topic2cbs["*"][o].apply(null,t));for(o=0,n=this.topic2cbs[e].length;o<n;o+=1)r.push(this.topic2cbs[e][o].apply(null,t));return r},r.sub=function(e,t,n){var o,r=0,i=[];if(e in this.topic2cbs&&this.enabled||(this.topic2cbs[e]=[]),this.topic2cbs[e].push(t),n&&e in this.lateTopics){for(r=0,o=this.lateTopics[e].length;r<o;r++)i.push(t.apply(null,this.lateTopics[e][r].args));return i}},r.unsub=function(e,n){var o=0;return e in this.topic2cbs&&(o=t(this.topic2cbs[e],n))>=0&&this.topic2cbs[e].splice(o,1)&&0===this.topic2cbs[e].length&&delete this.topic2cbs[e],e in this.lateTopics&&delete this.lateTopics[e],this},r.once=function(e,t,n){function o(){return r.unsub(e,o),t.apply(null,Array.prototype.slice.call(arguments,0))}var r=this;return this.sub(e,o,n)},r.reset=function(){var e=Array.prototype.slice.call(arguments,0),t=e.length,n=0;if(!t)return this.topic2cbs={},this.lateTopics={},this;for(null;n<t;n+=1)e[n]in this.topic2cbs&&delete this.topic2cbs[e[n]],e[n]in this.lateTopics&&delete this.lateTopics[e[n]];return this},{getChannels:function(t){var n,o={};if("boolean"==typeof t)for(n in e)e[n].enabled===t&&(o[n]=e[n]);else o=e;return o},get:function(t){return t in e||(e[t]=new n),e[t]}}}();"object"==typeof exports&&(module.exports=e),NS.Channel=e}(),function(){function e(e,t){var n,o="";for(n in e)e.hasOwnProperty(n)&&(o+=t(e,n,o));return o}function t(e,t){return n(e)||typeof JSON===_U_?e===t:JSON.stringify(e)===JSON.stringify(t)}function n(e){return"object"==typeof Node?e instanceof W.Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function o(e){return"object"==typeof HTMLElement?e instanceof W.HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function r(e,r,i,s){if(!e.match(/key|value|keyvalue/))throw new Error("Bad param for object.digFor");s=parseInt(s,10);var c=0,a={key:function(e,n,o){return NS.object.isString(e)&&o instanceof RegExp?e.match(o):t(e,o)},value:function(e,n,o){return NS.object.isString(n)&&o instanceof RegExp?n.match(o):t(n,o)},keyvalue:function(e,n,o){return(NS.object.isString(e)&&o.key instanceof RegExp?e.match(o.key):t(e,o.key))&&(NS.object.isString(n)&&o.value instanceof RegExp?n.match(o.value):t(n,o.value))}}[e],u=[],l=function(e,t,n,o,r){var i=[].concat.call(e,[t]),s=a(t,o[t],n);s&&(u.push({obj:o,value:o[t],key:i[i.length-1],parentKey:i[i.length-2],path:i.join("/"),container:i.slice(0,i.length-1).join("/"),parentContainer:i.slice(0,i.length-2).join("/"),regexp:s,level:r}),c++),f(o[t],n,i,r+1)},f=function(e,t,r,i){if(!n(e)&&!o(e)){var a,u;if(e instanceof Array)for(a=0,u=e.length;a<u&&(l(r,a,t,e,i),!s||s!==c);a++);else if("object"==typeof e)for(a in e)if(l(r,a,t,e,i),s&&s===c)break}};return f(r,i,[],0),u}NS.makeNs("object",{fromQs:function(){var e,t,n,o=document.location.search.substr(1).split("&"),r=[];for(e=0,t=o.length;e<t;e+=1)n=o[e].split("="),!r[n[0]]&&(r[n[0]]=decodeURIComponent(n[1]));return r},clone:function(e){var t,n,o,r=NS.object;if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){for(t=[],n=0,o=e.length;n<o;n++)t[n]=r.clone(e[n]);return t}if(e instanceof Object){t={};for(n in e)e.hasOwnProperty(n)&&(t[n]=r.clone(e[n]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},digForKey:function(e,t,n){return r("key",e,t,n)},digForValue:function(e,t,n){return r("value",e,t,n)},digForKeyValue:function(e,t,n){return r("keyvalue",e,t,n)},extend:function(e,t,n){var o,r=NS.object.clone(e);for(o in t)!t.hasOwnProperty(o)||o in r&&!n||(r[o]=t[o]);return r},keyize:function(e,t){var n={},o=0,r=e.length;for(null;o<r;o++)t in e[o]&&!(e[o][t]in n)&&(n[e[o][t]]=e[o]);return n},isString:function(e){return"string"==typeof e||e instanceof String},jCompare:t,toQs:function(t){return e(t,function(e,t,n){return[n?"&":"?",encodeURIComponent(t),"=",encodeURIComponent(e[t])].join("").replace(/'/g,"%27")})}})}(),NS.makeNs("css",{style:function(e,t,n){var o,r="object"==typeof t&&typeof n===_U_;if(r)for(o in t)e.style[o]=t[o];else{if(typeof n===_U_)return e.currentStyle?e.currentStyle[t]:e.style[t];n+="",e.style[t]=n,"opacity"===t&&(e.style.filter="alpha(opacity = "+~~(100*parseFloat(n,10)))}}}),NS.makeNs("dom",{remove:function(e){return e.parentNode&&e.parentNode.removeChild(e)}}),function(){function e(){return W.navigator.cookieEnabled}function t(e,t,n,o,r,i){if(!NS.cookie.enabled)return!1;this.cookie_nocookiesaround=!1;var s=new Date,c=new Date(s.getTime()+n);return WD.cookie=[e,"=",W.escape(t),n?";expires="+c.toGMTString():"",o?";path="+o:"",r?";domain="+r:"",i?";secure":""].join(),!0}function n(e,t,n){if(!NS.cookie.enabled)return!1;var o=!1;return this.get(e)&&(WD.cookie=[e,"=",t?";path="+t:"",n?";domain="+n:"",";expires=Thu, 01-Jan-1970 00:00:01 GMT"].join(""),o=!0),o}function o(e){var t=WD.cookie.split(";"),n="",o="",r=!1,i=0,s=t.length;if(!NS.cookie.enabled)return!1;for(null;i<s;i+=1){if(n=t[i].split("="),n[0].replace(/^\s+|\s+$/g,"")===e)return r=!0,n.length>1&&(o=W.unescape(n[1].replace(/^\s+|\s+$/g,""))),o;n=null,""}return r}function r(){if(!NS.cookie.enabled)return!1;var e,t=WD.cookie.split(/;/),n=0,o=t.length;for(null;n<o;n+=1)e=t[n].split(/=/),this.del(e[0],!1,!1);return this.cookie_nocookiesaround=!0,!0}function i(){return!!NS.cookie.enabled&&(""===WD.cookie?[]:this.cookie_nocookiesaround?[]:WD.cookie.split(";").forEach(function(e){var t=e.split("=");return{name:t[0],value:t[1]}}))}NS.makeNs("cookie",{enabled:!0,cookie_nocookiesaround:!1,initCheck:e,set:t,get:o,del:n,delall:r,getall:i})}(),NS.makeNs("i18n",function(){var e={};return NS.lang="en",{check:function(e){return e.match(/i18n\(([^}|]*)?\|?([^}]*)\)/)},dynamicLoad:function(t,n){for(n in t)NS.lang in t[n]&&(e[n]=t[n][NS.lang])},get:function(t,n){return NS.checkNs(t,e)||n||"no Value"},load:function(t){e=t},parse:function(e){var t,n,o,r,i=NS.object.digForValue(e,/i18n\(([^}|]*)?\|?([^}]*)\)/);for(o=0,r=i.length;o<r;o++)(typeof i[o].regexp).match(/boolean/i)||(t=NS.i18n.check(i[o].regexp[0]))&&(n=NS.checkNs(i[o].container,e),n[i[o].key]=NS.i18n.get(t[1],t[2]))}}}),function(){var W=window,xdr=void 0!==W.XDomainRequest&&document.all&&!navigator.userAgent.match(/opera/i),_={getxhr:function(e){var t,n=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],o=n.length,r=0;if(xdr&&e.cors)t=new W.XDomainRequest;else try{t=new W.XMLHttpRequest}catch(e){for(null;r<o;r+=1)try{t=new W.ActiveXObject(n[r])}catch(e){continue}!t&&W.alert("No way to initialize XHR")}return t},setHeaders:function(e,t){var n={xml:"text/xml",html:"text/html",json:"application/json"}[t]||"text/html";e.setRequestHeader("Accept",n+"charset=utf-8")},setMultipartHeader:function(e){e.setRequestHeader("Content-Type","multipart/form-data")},setCookiesHeaders:function(e){var t,n,o;for(t=NS.cookie.getall(),n=0,o=t.length;n<o;)e.setRequestHeader("Cookie",t[n].name+"="+t[n].value),n++},ajcall:function(e,t){var n,o,r=_.getxhr(t),i=t&&t.method||"POST",s=t&&t.cback,c=t&&t.opened||function(){},a=t&&t.loading||function(){},u=t&&t.error||function(){},l=t&&t.abort||function(){},f=t&&t.sync,h=t&&t.data||{},p=t&&t.type||"text/html",d=!t||void 0===t.cache||t.cache,m="xml"===p?"responseXML":"responseText",g=t&&t.timeout||1e4,y=t&&t.hasFiles,N=!1,S=!1,v=!1,b=!1;if(d||(h.C=+new Date),"GET"===i)h=NS.object.toQs(h).substr(1);else{n=new W.FormData;for(o in h)h.hasOwnProperty(o)&&n.append(o,h[o]);h=n}if(xdr&&t.cors)r.open(i,"GET"===i?e+(h?"?"+h:""):e),r.onerror=u,r.ontimeout=function(){},r.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t+"% uploaded")}},r.onload=function(){s(r.responseText)},r.timeout=3e3,_.setHeaders(r,y,p),o={xml:"text/xml",html:"text/html",json:"application/json"}[p]||"text/html",r.contentType=o,window.setTimeout(function(){r.send()},20);else{r.onreadystatechange=function(){if(b===r.readyState)return!1;if(b=r.readyState,4===parseInt(r.readyState,10)&&0===parseInt(r.status,10))return r.onerror({error:404,xhr:r,url:e}),r.abort(),!1;if("complete"===b||4===parseInt(b,10)&&200===parseInt(r.status,10))return N=!0,404===parseInt(r.status,10)?(r.onerror.call(r),!1):(s&&(S=r[m],function(){s(S)}()),v=r[m],W.setTimeout(function(){r=null},50),v);if(3===b)a(r);else if(2===b)c(r);else if(1===b)switch(y?_.setHeaders(r,"json"):_.setHeaders(r,p),i){case"POST":case"PUT":try{r.send(h||!0)}catch(e){}break;case"DELETE":case"GET":try{r.send(null)}catch(e){}break;default:W.alert(i),r.send(null)}return!0},r.onerror=function(){u&&u.apply(null,arguments)},r.onabort=function(){l&&l.apply(null,arguments)},r.open(i,"GET"===i?e+(h?"?"+h:""):e,f),W.setTimeout(function(){N||(N=!0,r.abort())},g);try{return"responseXML"===m?r[m].childNodes[0]:r[m]}catch(e){}}return!0}};NS.makeNs("io",{getxhr:_.getxhr,post:function(uri,cback,sync,data,cache,files,err){return _.ajcall(uri,{cback:function(r){files?(r=r.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,""),cback(window.JSON&&window.JSON.parse?JSON.parse(r):eval(["(",r,")"].join("")))):cback(r)},method:"POST",sync:sync,data:data,cache:cache,error:err,hasFiles:!!files})},get:function(e,t,n,o,r,i){return _.ajcall(e,{cback:t||function(){},method:"GET",sync:n,data:o,cache:r,error:i})},put:function(e,t,n,o,r,i){return _.ajcall(e,{cback:t,method:"PUT",sync:n,data:o,cache:r,error:i})},getJson:function(uri,cback,data,cors){return _.ajcall(uri,{type:"json",method:"GET",sync:!1,cback:function(r){r=r.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,""),cback(W.JSON&&W.JSON.parse?JSON.parse(r):eval(["(",r,")"].join("")))},data:data,cors:!!cors})},getXML:function(e,t){return _.ajcall(e,{method:"GET",sync:!1,type:"xml",cback:t||function(){}})}})}(),function(){var e=function(){function e(e,t){if("function"!=typeof e)throw new Error(t)}function t(e,t){if(void 0===e)throw new Error(t)}function n(e,t,n){var o=e.states[e.currentIndex];e.listeners.forEach(function(e){e(o,t,n)}),e.currentIndex<e.states.length-1&&(e.states=e.states.slice(0,e.currentIndex),e.tagsManager.reset(e.currentIndex+1)),e.tagsManager.add(n),e.states[++e.currentIndex]=t}function o(e,t){this.activeCheck=!!t,this.config=t||{},this.tags=[e],this.size=1}function r(t,n,r){e(t,s.REDUCERS_FUCTION),this.reducer=t,this.state=void 0!==n?n:this.reducer(),this.states=[this.state],this.tagsManager=new o("INITIAL",r),this.currentIndex=0,this.listeners=[]}function i(e){const t={};var n;for(n in e)t[n]=e[n]();return function(n,o,r){n=n||t;var i,s=Object.assign({},n);for(i in e)s[i]=e[i](s[i],o,r);return s}}const s={REDUCERS_FUCTION:"[ERROR] Reducer must be a function!",REDUCERS_RETURN:"[ERROR] Reducer should return something!",SUBSCRIBERS_FUNCTION:"[ERROR] Subscribers must be a functions!",ACTION_TYPE:"[ERROR] Actions needs a type",UNAUTHORIZED_STATECHANGE:"[ERROR] State transition not allowed"};return o.prototype.getCurrent=function(){return this.size?this.tags[this.size-1]:void 0},o.prototype.canMoveTo=function(e){if(this.activeCheck){var t=Object.keys(this.config),n=this.tags[this.size-1],o=~~t.indexOf(e);return o>=0&&this.config[n].includes(o)}return!0},o.prototype.add=function(e){this.size++,this.tags.push(e)},o.prototype.reset=function(e){this.tags=e?this.tags.slice(0,e):[],this.size=e?this.tags.length:0},r.prototype.getState=function(){return this.states[this.currentIndex]},r.prototype.dispatch=function(e,o){if(this.tagsManager.getCurrent(),!("type"in e))throw new Error(s.ACTION_TYPE);if(!this.tagsManager.canMoveTo(e.type))throw new Error(s.UNAUTHORIZED_STATECHANGE);var r,i=e.type,c=this.states[this.currentIndex],a=this.reducer(c,i,e);if(t(a,s.REDUCERS_RETURN),delete a.type,o)for(r in e)"type"===r||r in a||(a[r]=e[r]);return n(this,a,i),this},r.prototype.subscribe=function(t){e(t,s.SUBSCRIBERS_FUNCTION);var n,o=this;return this.listeners.push(t),n=this.listeners.length-1,function(){o.listeners=o.listeners.slice(0,n).concat(o.listeners.slice(n+1))}},r.prototype.replaceReducer=function(t){e(t,s.REDUCERS_FUCTION),this.reducer=t},r.prototype.reset=function(){var e=this.states[0];this.states=[e],this.currentIndex=0,this.tagsManager.reset(),this.listeners=[]},r.prototype.move=function(e){if(0===e)return this;var t=this,n=this.currentIndex+e,o=this.getState(),r=e>0?"FORWARD":"BACKWARD",i=n>-1&&n<this.states.length;return this.currentIndex=i?n:this.currentIndex,i&&this.listeners.forEach(function(e){e(o,t.getState(),{type:["TIMETRAVEL_",r].join("")})}),this},{combine:i,getStore:function(e,t,n){return new r(e,t,n)},isStore:function(e){return e instanceof r},ERRORS:s}}();"object"==typeof exports&&(module.exports=e),NS.getStore=e.getStore}(),function(){var e=0;NS.makeNs("timer",{add:function(t){e+=t},get:function(){var t=e+0;return e=0,t}})}(),Wnode.prototype.cleanup=function(){NS.events.unhandle(this.id);var e=this.node,t=[],n=["cleanable","parent","getNode","climb","root","done","resolve","data"],o=n.length,r=0,i=0,s=0,c=null;for(NS.utils.eulerWalk(e,function(n){n!==e&&3!==n.nodeType&&t.push(n)&&s++},"post");i<s;){for(c=t[i++];r<o;)c[n[r++]]=null;!function(e){e.parentNode.removeChild(e)}(c),c=null}return function e(t){t.children.forEach(e),t=null}(this),t=[],n=null,delete this.root,!0},Wnode.prototype.setMap=function(e){this.map=e,this.root=e.rootNode,this.abort=e.abort,this.getNode=e.getNode,this.getNodes=e.getNodes,this.lateWid=e.lateWid},Wnode.prototype.render=function(){var self=this,tmp,i,j,k,__nodeIdentifier="wid",replacementTempNode,rerendering=this.node&&this.parent&&this.node.parentNode===this.parent.node;return rerendering&&(replacementTempNode=document.createElement("div"),replacementTempNode.style.display="none",this.conf.target.replaceChild(replacementTempNode,this.node)),typeof this.conf[__nodeIdentifier]!==_U_&&this.map.add(this.conf[__nodeIdentifier],this),this.node=this.conf.ns?document.createElementNS(this.conf.ns,this.tag):document.createElement(this.tag),this.node.innerHTML=this.conf.html&&this.conf.data?NS.utils.replaceDataInTxt(""+this.conf.html,this.conf.data):this.conf.html||"",this.setData().setAttrs().setEvents().setStyle().setMethods().checkInit().checkWillRender(),"function"==typeof this.conf.content&&(this.conf.content=this.conf.content.call(this)),this.wlen=this.conf.content?this.conf.content.length:0,this.conf.cb=this.doRender&&this.conf.cb?this.conf.cb.bind(this):self.done.bind(this),this.doRender?(typeof this.conf.text!==_U_&&(tmp=NS.utils.replaceDataInTxt(""+this.conf.text,this.conf.data),tmp=document.createTextNode(""+tmp),this.node.appendChild(tmp)),rerendering?this.conf.target.replaceChild(this.node,replacementTempNode):this.conf.target.appendChild(this.node),this.checkEnd(),0===this.wlen?this.conf.cb("---auto---"):(this.praramsFromChildren=[],this.conf.content.forEach(function(e){e.target=self.node,self.children.push(new Wnode(e,function(){self.praramsFromChildren.push([].slice.call(arguments,0)),--self.wlen<=0&&self.conf.cb.apply(self,self.praramsFromChildren)},self.map,self).render())})),tmp=this.node.getAttribute("wwdb"),tmp&&(this.node.removeAttribute("wwdb"),void 0!==(i=NS.checkNs(tmp,this))&&(j=("this."+tmp).split("."),k=j.pop(),i=eval(j.join(".")),k in i&&NS.events.ww.on(i,k,this.node))),this.cleanable=!0,this):(this.conf.cb("---auto---"),this)},Wnode.prototype.checkWillRender=function(){return"willRender"in this.conf&&"function"==typeof this.conf.willRender&&(this.doRender=this.conf.willRender.call(this)),this},Wnode.prototype.subRender=function(){return Engy.render(this.sub)},Wnode.prototype.climb=function(e){e=e||1;for(var t=this;e--;)t=t.parent||t;return t},Wnode.prototype.descendant=function(){var e=this,t=Array.prototype.slice.call(arguments,0),n=0,o=e,r=t.length;if(!r)return o;for(;n<r;)o=o.children[~~t[n++]];return o},Wnode.prototype.setAttrs=function(){var e,t=this.node;if(typeof this.conf.attrs!==_U_){this.attrs=this.conf.attrs;for(e in this.attrs)"class"!==e?"style"!==e?t.setAttribute(e,this.attrs[e]):Wnode.prototype.setStyle.call(this):t.className=this.attrs[e]}return this},Wnode.prototype.setStyle=function(){var e,t=this.node;if(typeof this.conf.style!==_U_){this.style=this.conf.style;for(e in this.style)"float"===e?t.style[e.replace(/^float$/i,"cssFloat")]=this.style[e]:t.style[e]=this.style[e]}return this},Wnode.prototype.setMethods=function(){var e,t=this,n=Object.keys(this.conf);return n.forEach(function(n){(e=n.match(/^method_(\w*)$/i))&&(t[e[1]]=t.conf[e[0]].bind(t))}),this},Wnode.prototype.setData=function(){return this.conf.data&&(this.data=this.conf.data||{}),this},Wnode.prototype.checkInit=function(){return"init"in this.conf&&"function"==typeof this.conf.init&&!this.conf.init.call(this)&&this.abort(),this},Wnode.prototype.checkEnd=function(){var e=this;return"end"in this.conf&&"function"==typeof this.conf.end&&this.map.endFunctions.push(function(){e.conf.end.call(e)}),this},Wnode.prototype.setEvents=function(){var e,t,n,o=this;for(e in o.conf)(t=e.match(/^on([A-Z]{1}[a-z]*)$/))&&(n=t[1].toLowerCase(),function(e){NS.events.on(o.node,n,function(t){o.conf[e].call(o,t)})}(e));return this},Wnode.prototype.report=function(){window.JSON&&console.log("json size : "+JSON.stringify(this.conf).length),console.log("html size : "+this.root.node.innerHTML.length)},function(){function e(e,t,n){function o(){if(h)for(e.route&&"string"==typeof e.route&&NS.history.push(e.route),e.title&&"string"==typeof e.title&&(document.title=e.title),u.appendChild(a),u.cleanable=!0,r=+new Date,NS.timer.add(r-c);f.endFunctions.length;)f.endFunctions.pop()()}var r,i,c=+new Date,a=document.createDocumentFragment(),u=function(){return e.target||document.body}(),l=u.innerHTML,f={abort:function(){return h=!1,u.innerHTML=l,"onAbort"in e&&(typeof e.onAbort).match(/function/i)&&e.onAbort.call(null,e),!1},add:function(e,t){f.map[e]=t},endFunctions:[],getNode:function(e){return f.map[e]||!1},getNodes:function(){return f.map},lateWid:function(e){f.map[e]=this},map:{}},h=!0;return e.target=a,u.cleanable&&u.node.cleanup(),!0===t&&(u.innerHTML=""),i=new Wnode(e,o,f,null),u.node=i,f.rootNode=i,i.setMap(f),i.cleanable=!0,i.render(),!n||n in s||(s[n]=i),i}function t(t,n){e({target:t,content:[{html:n||""}]},!0)}function n(t){var n,o=document.createElement("div");return t.target=o,n=e(t),[o,n]}function o(e){var t=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(t),t.onload=function(){t.parentNode.removeChild(t)},t.src=e}function r(e){return e in s&&s[e]}function i(){return s}var s={};NS.makeNs("Widgzard",{render:e,cleanup:t,get:n,load:o,getElement:r,getElements:i})}(),function(){function _configSet(e){var t;for(t in config)t in e&&(config[t]=e[t]);return this}function _overwrite(e,t,n){for(var o=t.split(/\.|\//),r=o.length,i=0;i<r-1;)e=e[o[i++]];e[o[r-1]]=n}function _mergeComponent(e,t,n){var o=NS.checkNs(t,e),r=n,i={},s=0;for(s in r)i[s]=r[s];for(s in o)!s.match(/component|params/)&&(i[s]=o[s]);_overwrite(e,t,i)}function Processor(e){this.config=e,this.endPromise=NS.Balle.one()}function _process(e){return new Processor(e).run()}function _component(e,t){e in preloadedComponents||(preloadedComponents[Processor.prototype.getFileName(e)]=t)}function _components(e){for(var t in e)_component(t,e[t])}function _clone(e){if(null==e||"object"!=typeof e)return e;var t,n=e.constructor();for(t in e)e.hasOwnProperty(t)&&(n[t]=_clone(e[t]));return n}console.log("\n\n ENGY v.3.1.22\n\n");var components={},preloadedComponents={},config={fileNameSeparator:"/",fileNamePrepend:"",ext:".js",componentsUrl:"/components/"};Processor.prototype.getFileName=function(e){var t=e.split(/\/|\|/),n=e,o=t.length;return t[o-1]=config.fileNamePrepend+t[o-1],n=t.join(config.fileNameSeparator),[config.componentsUrl,config.componentsUrl.match(/\/$/)?"":"/",n,config.ext].join("")},Processor.prototype.run=function(){var self=this,langFunc=NS.i18n.parse,elementsN=0,start=+new Date,end,xhrTot=0,requested={},cback,computeStats=!0,stats={time:0,elements:0,requested:{},xhrTot:0};return function solve(){var component=NS.object.digForKey(self.config,"component",1),componentName,cached,preLoaded,xhrStart=0,xhrEnd=0;component.length?(component=component[0],componentName=self.getFileName(component.value),component.value in requested?requested[component.value]++:(requested[component.value]=1,elementsN++),cached=componentName in components,preLoaded=componentName in preloadedComponents,cback=function(cntORobj){xhrEnd=+new Date,xhrTot+=xhrEnd-xhrStart;var params=NS.checkNs(component.container+"/params",self.config),obj,usedParams,foundParam,foundParamValue,foundParamValueReplaced,i,l;if(preLoaded?obj=_clone(cntORobj):(cached||(components[componentName]=_clone(cntORobj)),cntORobj=cntORobj.replace(/^[^{]*/,"").replace(/(;?([\n\s]*)?)$/,""),obj=eval("("+cntORobj+")")),params&&(usedParams=NS.object.digForValue(obj,/#PARAM{([^}|]*)?\|?([^}]*)}/),l=usedParams.length))for(i=0;i<l;i++)foundParam=NS.checkNs(usedParams[i].regexp[1],params),foundParamValue=typeof foundParam!==_U_?foundParam:usedParams[i].regexp[2]||"",(typeof foundParamValue).match(/string/i)?(foundParamValueReplaced=NS.checkNs(usedParams[i].path,obj).replace(usedParams[i].regexp[0],foundParamValue),_overwrite(obj,usedParams[i].path,foundParamValueReplaced)):_overwrite(obj,usedParams[i].path,foundParamValue);component.container?_mergeComponent(self.config,component.container,obj):self.config=obj,solve()},xhrStart=+new Date,preLoaded?cback(preloadedComponents[componentName]):cached?cback(components[componentName]):NS.io.get(componentName,cback,!0)):(end=+new Date,stats.time=end-start,stats.elements=elementsN,stats.requested=requested,stats.xhrTot=xhrTot,self.endPromise.resolve([self.config,computeStats&&stats]))}(),langFunc&&langFunc(self.config),self.endPromise},
NS.makeNs("Engy",{component:_component,components:_components,configSet:_configSet,define:_component,get:function(e,t,n){return NS.Balle.one(function(t,n){return _process(e).then(t)})},load:function(e){return NS.Widgzard.load(e)},getElement:function(e){return NS.Widgzard.getElement(e)},getElements:function(){return NS.Widgzard.getElements()},process:_process,report:function(e){var t,n=new Array(37).join("-");console.log(n),console.log("Engy used "+e.elements+" component"+(1===e.elements?"":"s")),console.log("usage: ");for(t in e.requested)console.log("> "+t+": "+e.requested[t]+" time"+(e.requested[t]>1?"s":""));console.log("Engy total time: "+e.time+"ms ("+(e.time-e.xhrTot)+" unfolding, "+e.xhrTot+" xhr)"),console.log(n)},render:function(e,t,n){var o=+new Date;return NS.Balle.one(function(r,i){_process(e).then(function(e){e[1]&&NS.Engy.report(e[1]);var i=+new Date;console.log("Engy process tot: "+(i-o)),r(NS.Widgzard.render(e[0],t,n))})})}})}(),{Widgzard:{render:NS.Widgzard.render,cleanup:NS.Widgzard.cleanup,load:NS.Widgzard.load,get:NS.Widgzard.get,getElement:NS.Widgzard.getElement,getElements:NS.Widgzard.getElements,getStore:NS.getStore,Channel:NS.Channel,events:NS.events,cookie:NS.cookie,utils:NS.utils,i18n:NS.i18n,io:NS.io,object:NS.object,css:NS.css,dom:NS.dom,timer:NS.timer,history:NS.history},Engy:{component:NS.Engy.component,components:NS.Engy.components,configSet:NS.Engy.configSet,define:NS.Engy.define,get:NS.Engy.get,load:NS.Engy.loadStealth,getElement:NS.Engy.getElement,getElements:NS.Engy.getElements,process:NS.Engy.process,render:NS.Engy.render,timer:NS.timer,history:NS.history}}}("undefined","prototype");Widgzard=t.Widgzard,Engy=t.Engy}()}();